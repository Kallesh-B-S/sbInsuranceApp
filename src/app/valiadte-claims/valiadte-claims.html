<div class="dashboard-wrapper">
    <main class="dashboard-grid">
        <header class="page-header">
            <div class="header-main">

                <div class="title-section">
                    @if(userRole === 'customer'){
                    <button class="back-btn" [routerLink]="['/home']">
                        <mat-icon>arrow_back</mat-icon>
                    </button>
                }
                    <h1 class="page-title">Claims</h1>
                </div>


                <!-- <h1 class="page-title">Claims</h1> -->

                <div class="filter-bar">
                    <div class="select-input-group">
                        <mat-icon>filter_list</mat-icon>
                        <select (change)="applyStatusFilter($event)">
                            <option value="">All Statuses</option>
                            <option value="SUBMITTED">Submitted</option>
                            <option value="UNDER_REVIEW">Under Review</option>
                            <option value="SETTLED">Settled</option>
                            <option value="REJECTED">Rejected</option>
                        </select>
                    </div>
                </div>
            </div>
        </header>

        <section class="glass-card">
            <div class="table-responsive-container">
                <table mat-table [dataSource]="filteredClaims()" class="custom-table">

                    <ng-container matColumnDef="claimId">
                        <th mat-header-cell *matHeaderCellDef> Claim Number </th>
                        <td mat-cell *matCellDef="let c">
                            <span class="orange-link fw-bold">{{c.claimNumber}}</span>
                        </td>
                    </ng-container>

                    <!-- <ng-container matColumnDef="policyNumber">
            <th mat-header-cell *matHeaderCellDef> Policy </th>
            <td mat-cell *matCellDef="let c"> {{c.policyNumber}} </td>
          </ng-container> -->

                    <ng-container matColumnDef="claimAmount">
                        <th mat-header-cell *matHeaderCellDef> Repair Amount </th>
                        <td mat-cell *matCellDef="let c"> {{c.requestedAmount | currency}} </td>
                    </ng-container>

                    <ng-container matColumnDef="claimStatus">
                        <th mat-header-cell *matHeaderCellDef> Status </th>
                        <td mat-cell *matCellDef="let c">
                            <span class="badge" [ngClass]="'badge-' + c.status.toLowerCase()">{{c.status}}</span>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="incidentDate">
                        <th mat-header-cell *matHeaderCellDef> Incident Date </th>
                        <td mat-cell *matCellDef="let c">{{ c.incidentDate ? (c.incidentDate | date: 'dd-MM-yyyy') :
                            '--' }}</td>
                    </ng-container>

                    <ng-container matColumnDef="remarks">
                        <th mat-header-cell *matHeaderCellDef> Remarks </th>
                        <td mat-cell *matCellDef="let c"> {{c.remarks || 'N/A'}}</td>
                    </ng-container>

                    <ng-container matColumnDef="actions">
                        <th mat-header-cell *matHeaderCellDef class="text-right"> Actions </th>
                        <td mat-cell *matCellDef="let c">
                            <div class="action-cell-wrapper">
                                <button mat-button class="view-claims-btn" [routerLink]="['/claim', c.id]">
                                    <mat-icon>visibility</mat-icon>
                                    <span>View Details</span>
                                </button>
                            </div>
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="claimColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: claimColumns;"></tr>

                    <tr class="mat-row no-data-row" *matNoDataRow>
                        <td class="mat-cell text-center p-4" [attr.colspan]="claimColumns.length">
                            <div class="no-data-content">
                                <mat-icon
                                    style="font-size: 48px; height: 48px; width: 48px; color: #ccc;">search_off</mat-icon>
                                <p>No claims found matching your criteria.</p>
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </section>
    </main>
</div>