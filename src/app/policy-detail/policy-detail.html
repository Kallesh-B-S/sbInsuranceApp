@if (data(); as d) {
<div class="detail-container">
  <div class="title-section">
    <button class="back-btn" [routerLink]="['/home']">
      <mat-icon>arrow_back</mat-icon>
    </button>
  </div>

  <div class="glass-card detail-header-card">
    <div class="header-content">
      <span class="badge badge-active">{{ d.policy.status }}</span>
      <h1>{{ d.policy.policyName }}</h1>
      <p class="subtitle">Policy ID: <span class="mono">{{ d.policy.policyNumber }}</span></p>
    </div>
  </div>

  <div class="detail-grid-layout">
    <div class="glass-card">
      <h2 class="section-title"><mat-icon>description</mat-icon> Coverage Details</h2>
      <div class="info-grid-internal">
        <div class="info-box">
          <span class="label">Premium Amount</span>
          <div class="value">{{ d.policy.premiumAmount | currency }}</div>
        </div>
        <div class="info-box">
          <span class="label">Coverage Limit</span>
          <div class="value">{{ d.policy.coverageAmount | currency }}</div>
        </div>
        <div class="info-box wide">
          <span class="label">Duration</span>
          <div class="value-small">
            <mat-icon>calendar_today</mat-icon>
            {{ d.policy.startDate }} â€” {{ d.policy.endDate }}
          </div>
        </div>
      </div>
    </div>

    <div class="glass-card">
      <h2 class="section-title"><mat-icon>directions_car</mat-icon> Vehicle Information</h2>
      <div class="info-grid-internal-a">
        <div class="info-box-a">
          <span class="label">Make / Model / Year</span>
          <div class="value">{{ d.automobile.make }} / {{ d.automobile.made }} / {{ d.automobile.year }}</div>
        </div>
        
        <div class="previous-ins-box">
          <span class="label">Previous Provider Record</span>
          @if(d.automobile.previousInsurance) {
            <div class="value-small highlight-text">
              <strong>{{ d.automobile.previousInsurance.company }}</strong> 
              <span class="text-secondary">
                ({{ d.automobile.previousInsurance.lastClaimAmount | currency }})
              </span>
            </div>
          } @else {
            <div class="value-small text-muted">No previous record found</div>
          }
        </div>
      </div>
    </div>
  </div>
</div>
} @else {
  <div class="loading-state">
    <p>Loading policy data...</p>
  </div>
}